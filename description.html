<!DOCTYPE html>
<!-- Website template by freewebsitetemplates.com -->
<head>
    <title>Decsription</title>
    <meta charset="utf-8">
    <!--<link href="css/style.css" rel="stylesheet" type="text/css">-->
    <script src="js/cart.js"></script>
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<script type="text/javascript">

    function displayItemDescription() {
        this.displaySelectedItemsFromCart();
        var response;
        var productType;
        var imgSrc;
        var parameters = location.search.substring(1).split("&");
        var temp = parameters[0].split("=");
        choice = unescape(temp[1]);
       
        switch (choice) {
            case 'Burger': response = displayBurgers();
                productType = 'Burgers';
                imgSrc = "images/burger.jpg";
                break;

            case 'Bowls': response = displayBowls();
                productType = 'Bowls';
                imgSrc = "images/bowl.jpg"
                break;

            case 'Subs': response = displaySubs();
                     productType = 'Subs';
                     imgSrc = "images/sub.jpg"
                     break;
               
            case 'wraps': response = displayWraps();
                productType = 'Wraps';
                imgSrc = "images/fries.jpg"
                break;

            case 'Breakfast': response = displayBreakfastItems();
                productType = 'Breakfast';
                imgSrc = "images/breakfast3.jpg"
                break;
        }
       
        for (var prop in response) {
         
            document.getElementById('tblHeader').innerHTML = productType;
            document.getElementById('tblHeader').setAttribute('colspan', 3);

            const newRow = document.getElementById('tblDescription').appendChild(document.createElement('tr'));
            const rowId = 'cartRow' + Math.random();
            newRow.setAttribute('id', rowId);
            
            var divProductImg = document.createElement("img"); 
            divProductImg.src = imgSrc;
            divProductImg.style.width = "120px"
            divProductImg.style.height = "100px";

            newRow.appendChild(divProductImg);
          
            var code = response[prop].code;
            const productName = code + "." + response[prop].productName;
            var divProductName = document.createElement("a");
            var textnode = document.createTextNode(productName)
            divProductName.href = "javascript:openPopUp('"+code+"')" 
            divProductName.appendChild(textnode);

            const productDescription = response[prop].description;
            var divProductDesc = document.createElement("span");
            var textDesc = document.createTextNode(productDescription)
            divProductDesc.appendChild(textDesc);
            divProductDesc.style.background = "none";
            divProductName.appendChild(divProductDesc);
            newRow.appendChild(divProductName)
            divProductName.style.textDecoration = "none";
            divProductName.style.className = "fontDescription";
            
            const btnPlus = '+';
            var divPlus = document.createElement("span"); /*I have changed this to span because it was inheriting style from #body .content div div and breaking the UI. It is a temporary fix*/
            var txtPlus = document.createTextNode(btnPlus);
            divPlus.appendChild(txtPlus);
            divPlus.style.background = "none";
            const colId = 'cartRow' + Math.random();
            divPlus.setAttribute('id', colId);
         


            const price = "$" + response[prop].price;
            var divPrice = document.createElement("span"); /*I have changed this to span because it was inheriting style from #body .content div div and breaking the UI. It is a temporary fix*/
            var textnodePrice = document.createTextNode(price)
            divPrice.appendChild(textnodePrice);
            divPrice.style.background = "none";
            divPlus.appendChild(divPrice);

             

            const btnName = '-';
            var divMinus = document.createElement("span"); /*I have changed this to span because it was inheriting style from #body .content div div and breaking the UI. It is a temporary fix*/
            var txt = document.createTextNode(btnName);
            divMinus.appendChild(txt);
            divMinus.style.background = "none";
            divPlus.appendChild(divMinus)

            newRow.appendChild(divPlus);
            divPlus.className = "fontBold";

            divPlus.onclick = function () {
                addToCart('"+code+"');
                location.reload();
            };

                divMinus.onclick = function () {
                decreaseQuantity('"+code+"');
                location.reload();

            };
            
        }
    }
    window.onload = displayItemDescription;    
</script>
<script>
    function displaySelectedItemsFromCart() {
        //Since the user can select any number of items, creating the div's dynamically
        var response = sessionStorage.getItem("vegOramaCart");
        var result = JSON.parse(response);
        //Cartline is an array and will have multiple items, so looping through and fetching values from session to display inside div's.
        if (result) {
            result.cartLine.forEach((item, rowNumber) => {
                const newRow = document.getElementById('cartTable').appendChild(document.createElement('tr'));
                const rowId = 'cartRow' + rowNumber;
                newRow.setAttribute('id', rowId);
                

                var code = item.code;
                const productName = code + "." + item.productName;
                var divProductName = document.createElement("div");
                var textnode = document.createTextNode(productName)
                divProductName.appendChild(textnode);
                newRow.appendChild(divProductName)

                var btnMinus = document.createElement("img");
                btnMinus.src = "images/minus.png";
                btnMinus.style.width = "20px"
                btnMinus.style.height = "30px";
                newRow.appendChild(btnMinus);

                btnMinus.onclick = function () {
                    decreaseQuantity(item.code)
                    location.reload();

                };
                              

                const quantity = item.qty;
                var divQty = document.createElement("div");
                var textnodeQty = document.createTextNode(quantity);
                divQty.appendChild(textnodeQty);
                newRow.appendChild(divQty)


            
                var btnPlus = document.createElement("img");
                btnPlus.src = "images/plus.png";
                btnPlus.style.width = "15px"
                btnPlus.style.height = "23px";
                newRow.appendChild(btnPlus);

                btnPlus.onclick = function () {
                    addToCart(item.code)
                    location.reload();

                };


                const price = item.price;
                var divPrice = document.createElement("div");
                var textnodePrice = document.createTextNode(price)
                divPrice.appendChild(textnodePrice);
                newRow.appendChild(divPrice)              
               

                var btnCancel = document.createElement("img");
                btnCancel.src = "images/DeleteImg.png";
                btnCancel.style.width = "18px"
                btnCancel.style.height = "20px";
                newRow.appendChild(btnCancel);
                btnCancel.onclick = function () {

                    var rowId = newRow.id;
                    deleteCartItem(rowId, item.code)
                    location.reload();


                }

                btnCancel.style.borderRadius = "8px";
                btnCancel.style.backgroundColor = "red";

            })

            const totalprice = "$" + result.totalPrice;
            var divTotalPrice = document.createElement("div");
            var textnodeTotalPrice = document.createTextNode(totalprice)
            divTotalPrice.appendChild(textnodeTotalPrice);
            document.getElementById('dvTotalPrice').appendChild(divTotalPrice);

            const salestax = "$" + result.salesTax;
            var divSalesTax = document.createElement("div");
            var textnodeSalesTax = document.createTextNode(salestax)
            dvSalesTax.appendChild(textnodeSalesTax);
            document.getElementById('dvSalesTax').appendChild(divSalesTax);


            const finalTotalprice = "$" + result.finalTotal;
            var divFinalTotalPrice = document.createElement("div");
            var textnodeTotalPrice = document.createTextNode(finalTotalprice)
            divFinalTotalPrice.appendChild(textnodeTotalPrice);
            document.getElementById('dvFinalTotalPrice').appendChild(divFinalTotalPrice);
            divFinalTotalPrice.className="fontBold"
            document.getElementById('dvQuantity').innerHTML = "(" + result.totalQuantity + ")";
        }
        else {

            document.getElementById('dvShowNoitems').innerHTML = "Your bag is empty!";
            document.getElementById('dvQuantity').innerHTML = " ";
        }


    }
</script>

<html>
<body>

    <div id="blue-third">
        <div id="header">
            <div>
                <a href="index.html"><img src="images/logo.png" width="332" height="205" alt="" title=""></a>
                <ul class="navigation">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li>
                        <a class="active" href="burger.html">Menu</a>
                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                    <li>
                        <a href="description.html"><img src="images/shoppingBag1.png" width="23" height="35" /></a>
                    </li>
                    <li class="quantity">
                        <div id="dvQuantity"></div>  <!--Div to show the quantity of items in the cart,beside the cart image-->
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div id="body" style="background-color:white !important">

        <div class="content" style="background:none !important">
            <table id ="tblDescription" class ="tblDesc" style="border-style:solid;border-color:gray;">
                <tr>
                    <th class="headerColor" id="tblHeader"></th>
                </tr>
            
            </table>
        </div>
        <div class="sidebar">
           
            <div id="dvMain" class="displayMain" style="width:100%">
                <table id="cartTable" class="cart" style="width:100%;">
                    <tr>
                        <td> <h1>Veg-O-Rama</h1></td>
                        <td colspan="5"></td>
                    </tr>
                    <!--*Display description in first row *-->
                    <tr id="tblCartDesc">
                        <td style="width:50%">
                            Item
                        </td>
                        <td style="width:5%"></td>
                        <td style="width:20%">
                            Qty
                        </td>
                        <td style="width:5%"></td>
                        <td style="width:15%">
                            Price
                        </td>
                        <td style="width:5%"></td>
                    </tr>
                    <tr>
                        <td colspan="5" id="dvShowNoitems" class="txtNoItem"></td>
                    </tr>

                </table>
                <table id="cartPricing" style="width:100%;background-color: lightgray;">
                    <tr>
                        <td style="width:80%">Total Price</td>
                        <td style="width:20%"><div id="dvTotalPrice" style="text-align:right"></div></td>
                    </tr>
                    <tr>
                        <td>Sales Tax</td>
                        <td><div id="dvSalesTax" style="text-align:right"></div></td>
                    </tr>
                    <tr>
                        <td>
                            Final Total Price
                        </td>
                        <td><div id="dvFinalTotalPrice" style="text-align:right"></div></td>
                    </tr>
                </table>

            </div>

            <div id="dvProceedBtn" style="margin-right:3px;margin-top:10px">
                <button onclick="navigate()" id="btnProceed">Proceed to check out </button>
                <button id="btnCancel">Cancel </button>
            </div>
            

        </div>
    </div>
    <div id="footer">
        <div>
            <ul>
                <li class="first">
                    <h2>Delivery Hotline</h2>
                    <h3>Call 0-123-456-789</h3>
                    <ul>
                        <li>
                            <a href="http://www.google.com" class="facebook"></a>
                        </li>
                        <li>
                            <a href="http://www.google.com" class="twitter"></a>
                        </li>
                        <li>
                            <a href="http://www.google.com" class="googleplus"></a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="index.html"><img class="logo" src="images/logo-footer.png" alt=""></a>
                    <ul class="navigation">
                        <li>
                            <a href="index.html">Home</a>
                        </li>
                        <li>
                            <a href="about.html">About Us</a>
                        </li>
                        <li>
                            <a href="menu.html">Menu</a>
                        </li>
                        <li>
                            <a href="contact.html">Contact Us</a>
                        </li>
                    </ul>
                    <span>&copy; Veg-O-Rama All Rights Reserved</span>
                </li>
                <li class="last">
                    <h2>Follow Us By Email</h2>
                    <form action="index.html">
                        <input type="text" name="subscribe" value="Enter Your Email Here...">
                        <input type="submit" value="">
                    </form>
                </li>
            </ul>
        </div>
    </div>
    <div id="myModal" class="modal">

        <!-- Modal content -->
  <div class="modal-content">
   <span class="close" id="closeModal" onclick="hideModal(); return false">&times;</span>
   <div id="modalItem">
   <h2 id="modalItemName"> </h2>
   <h2 id="modalItemDesc"> </h2>
   <td> <img src="images/burger.jpg" alt="" width="400" height="300" align="left"/></td>
   <p><b>Price:</b><h3 id="modalItemPrice"> </h3> </p>
    <form method="post" action="">
     <div>
     <label for="name"><b>Quantity:</b></label>
     <input type="button"  onclick="decrementValue()" value="-" >
     <input type="number" min="1" id="modalItemQty" value="1"/>
     <input type="button" onclick="incrementValue()" value="+" />      
		<input type="hidden" name="modalItemCode" >
     </div>
    </form>
     <legend><b> Choose your burger type: </b></legend>
     <label for="bun">Bun</label>
     <input type="radio" name="type" id="bun" value="Bun">
     <label for="Bread">Bread</label>
     <input type="radio" name="type" id="bread" value="Bread">
  
      <legend><b> Make it:</b></legend>
      <input type="checkbox" name="type" value="Vegan"  onchange="addExtraCharges(this)"> Vegan   (+$1.00)<br>
      <input type="checkbox" name="type" value="Gluten Free" onchange="addExtraCharges(this)"> Gluten Free  (+$1.00)<br>
     
      <label for="comment"><b> Special Request: </b></label>
      <textarea rows="4" cols="50">
      </textarea>
      
    </form>
    <p align="right">
      <input color="blue" type="button" value="Add to Cart" />
    </p>
   </div>
  </div>

    </div>
    
</body>
</html>